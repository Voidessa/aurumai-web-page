# ✅ Пошаговая проверка подключения Google Sheets

## Шаг 1: Проверка ID таблицы

**Текущий ID в настройках:** `1SlF7ulUUkwkqoZxSI9xTDPAtwEa5z6ysuPazW3TFuos`

**Ваша ссылка:** https://docs.google.com/spreadsheets/d/1SlF7ulUUkwkqoZxSI9xTDPAtwEa5z6ysuPazW3TFuos/edit

✅ ID совпадает

---

## Шаг 2: Проверка Service Account доступа

1. Откройте таблицу: https://docs.google.com/spreadsheets/d/1SlF7ulUUkwkqoZxSI9xTDPAtwEa5z6ysuPazW3TFuos/edit

2. Нажмите **"Настройки Доступа"** (кнопка справа вверху)

3. Проверьте, что есть пользователь:
   - **Email:** `ai-course-backend@aurum-ai-web-page.iam.gserviceaccount.com`
   - **Права:** **"Редактор"** (не "Читатель"!)

4. Если его нет:
   - Нажмите **"Добавить пользователей или группы"**
   - Вставьте: `ai-course-backend@aurum-ai-web-page.iam.gserviceaccount.com`
   - Выберите **"Редактор"**
   - Нажмите **"Отправить"**

---

## Шаг 3: Создание листа "Leads" с заголовками

1. В таблице внизу слева найдите вкладки листов

2. Если листа "Leads" нет:
   - Нажмите **"+"** (Добавить лист)
   - Переименуйте в **"Leads"** (нажмите на название листа)

3. В первой строке (строка 1) введите заголовки:

| A1 | B1 | C1 | D1 | E1 | F1 | G1 | H1 | I1 |
|----|----|----|----|----|----|----|----|----|
| Дата | Имя | Email | Telegram | Опыт | Цель | Источник | UTM | Статус |

**Или скопируйте в A1:**
```
Дата	Имя	Email	Telegram	Опыт	Цель	Источник	UTM	Статус
```

---

## Шаг 4: Проверка текущих настроек

Запустите в терминале:
```bash
cd backend
cat .env.local | grep -E "(CRM_TARGET|GOOGLE_SHEETS_ID|GOOGLE_SA_EMAIL)"
```

Должно быть:
- `CRM_TARGET=SHEETS`
- `GOOGLE_SHEETS_ID=1SlF7ulUUkwkqoZxSI9xTDPAtwEa5z6ysuPazW3TFuos`
- `GOOGLE_SA_EMAIL=ai-course-backend@aurum-ai-web-page.iam.gserviceaccount.com`

---

## Шаг 5: Тестирование

После выполнения всех шагов выше, скажите "готово" и я отправлю тестовый запрос.

---

## Возможные проблемы

### Данные не появляются:
1. ✅ Service Account имеет права "Редактор" (не "Читатель")
2. ✅ Лист называется точно "Leads" (с большой буквы L)
3. ✅ Заголовки добавлены в первую строку
4. ✅ ID таблицы правильный в `.env.local`
5. ✅ Сервер перезапущен после изменения `.env.local`

### Если все равно не работает:
- Проверьте логи сервера на ошибки
- Убедитесь, что лист "Leads" виден в списке листов внизу

